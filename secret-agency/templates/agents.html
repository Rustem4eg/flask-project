<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>–ê–≥–µ–Ω—Ç—Å—Ç–≤–æ –†–∞–∑–≤–µ–¥–∫–∏</title>
    <!-- Bootstrap 5.3.7 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
<div class="container py-4">
    <h1 class="text-center mb-4">üìÅ –î–æ—Å—å–µ –ê–≥–µ–Ω—Ç–æ–≤</h1>

    {% if alert %}
    <div class="alert alert-warning alert-dismissible fade show" role="alert">
        {{ alert }}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    {% endif %}

    <div class="d-flex justify-content-between mb-3">
        <a href="{{ url_for('add_agent') }}" class="btn btn-success">‚ûï –ù–æ–≤—ã–π –ê–≥–µ–Ω—Ç</a>
        <div>
            <a href="{{ url_for('filter_by_level', level='–°–µ–∫—Ä–µ—Ç–Ω–æ') }}" class="btn btn-sm btn-outline-warning">–°–µ–∫—Ä–µ—Ç–Ω–æ</a>
            <a href="{{ url_for('filter_by_level', level='–°–æ–≤–µ—Ä—à–µ–Ω–Ω–æ —Å–µ–∫—Ä–µ—Ç–Ω–æ') }}" class="btn btn-sm btn-outline-danger">–°–æ–≤. —Å–µ–∫—Ä–µ—Ç–Ω–æ</a>
            <a href="{{ url_for('filter_by_level', level='–û—Å–æ–±–æ–π –≤–∞–∂–Ω–æ—Å—Ç–∏') }}" class="btn btn-sm btn-outline-purple">–û—Å–æ–±–æ–π –≤–∞–∂–Ω–æ—Å—Ç–∏</a>
            <a href="{{ url_for('index') }}" class="btn btn-sm btn-outline-secondary">–í—Å–µ</a>
        </div>
    </div>

    {% if agents %}
    <div class="list-group">
        {% for a in agents %}
        <div class="list-group-item">
            <h5>{{ a.codename }}</h5>
            <p class="mb-1"><small>üìû {{ a.contact_number }} &nbsp; | &nbsp; üìß {{ a.email }}</small></p>
            {% if a.clearance_level == "–°–µ–∫—Ä–µ—Ç–Ω–æ" %}
                <span class="badge badge-secret">–°–µ–∫—Ä–µ—Ç–Ω–æ</span>
            {% elif a.clearance_level == "–°–æ–≤–µ—Ä—à–µ–Ω–Ω–æ —Å–µ–∫—Ä–µ—Ç–Ω–æ" %}
                <span class="badge badge-topsecret">–°–æ–≤–µ—Ä—à–µ–Ω–Ω–æ —Å–µ–∫—Ä–µ—Ç–Ω–æ</span>
            {% else %}
                <span class="badge badge-critical">–û—Å–æ–±–æ–π –≤–∞–∂–Ω–æ—Å—Ç–∏</span>
            {% endif %}
            <div class="mt-2">
                <a href="{{ url_for('view_agent', id=a.id) }}" class="btn btn-sm btn-info">–î–æ—Å—å–µ</a>
                <a href="{{ url_for('edit_agent', id=a.id) }}" class="btn btn-sm btn-warning">–ò–∑–º–µ–Ω–∏—Ç—å</a>
                <a href="{{ url_for('emergency_call', id=a.id) }}" class="btn btn-sm btn-danger"
                   onclick="return confirm('–û—Ç–ø—Ä–∞–≤–∏—Ç—å —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ?')">üö® –í—ã–∑–æ–≤</a>
                <a href="{{ url_for('delete_agent', id=a.id) }}" class="btn btn-sm btn-outline-danger"
                   onclick="return confirm('–£–Ω–∏—á—Ç–æ–∂–∏—Ç—å –¥–æ—Å—å–µ? –≠—Ç–æ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')">–£–¥–∞–ª–∏—Ç—å</a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="text-center text-muted">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤. –ù–∞–±–µ—Ä–∏—Ç–µ –Ω–æ–≤–æ–±—Ä–∞–Ω—Ü–µ–≤.</p>
    {% endif %}
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>