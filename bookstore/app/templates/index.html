{% extends "base.html" %}
{% block content %}
<h1 class="mb-4">Главная страница</h1>

<h2>ТОП-3 книги недели</h2>
<div class="row mb-4">
{% for book in top_books %}
  <div class="col-md-4 mb-4">
    <div class="card h-100">
      <img src="{{ url_for('static', filename=book.cover) }}" class="card-img-top" alt="{{ book.title }}" style="height: 250px; object-fit: cover;">
      <div class="card-body d-flex flex-column">
        <h5 class="card-title">{{ book.title }}</h5>
        <p class="card-text text-muted">{{ book.author }}{% if book.year %}, {{ book.year }}{% endif %}</p>
        <p class="text-warning">★ {{ "%.1f"|format(book.rating) if book.rating else "—" }}</p>
        <a href="{{ url_for('main.book_detail', book_id=book.id) }}" class="btn btn-outline-primary mt-auto">Подробнее</a>
      </div>
    </div>
  </div>
{% endfor %}
</div>

<h3>Жанры</h3>
<ul class="list-unstyled">
{% for genre in genres %}
  <li><a href="{{ url_for('main.catalog', genre=genre.id) }}">{{ genre.name }}</a></li>
{% endfor %}
</ul>
<a href="{{ url_for('main.catalog') }}" class="btn btn-secondary">Весь каталог</a>
{% endblock %}